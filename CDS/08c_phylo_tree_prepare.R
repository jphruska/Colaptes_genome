require(ape)
require(phytools)

text.string <- "((Tinamus_major_Great_Tinamou:83.7636,Struthio_camelus_Ostrich:83.7636)[&95%={58.2,95.2}]:17.8749,((Anas_platyrhynchos_Mallard:65.7832,(Gallus_gallus_Red_Junglefowl:27.9122,Meleagris_gallopavo_Turkey:27.9122)[&95%={10.8,45.4}]:37.871)[&95%={54.0,74.1}]:22.7881,(((Phoenicopterus_ruber_American_Flamingo:56.3318,Podiceps_cristatus_Great_Crested_Grebe:56.3318)[&95%={38.9,63.0}]:11.7895,(Columba_livia_Rock_Pigeon:65.6081,(Pterocles_gutturalis_Yellow_throated_Sandgrouse:61.612,Mesitornis_unicolor_Brown_Mesite:61.612)[&95%={57.7,65.1}]:3.9961)[&95%={62.1,68.9}]:2.5132)[&95%={64.8,71.3}]:1.0721,(((Cuculus_canorus_Common_Cuckoo:64.898,(Tauraco_erythrolophus_Red_crested_Turaco:62.2562,Chlamydotis_macqueenii_Macqueens_Bustard:62.2562)[&95%={58.7,65.4}]:2.6418)[&95%={61.6,67.9}]:1.8403,(Antrostomus_carolinensis_Chuck_wills_widow:62.9396,(Chaetura_pelagica_Chimney_Swift:43.6514,Calypte_anna_Annas_Hummingbird:43.6514)[&95%={33.6,52.6}]:19.2882)[&95%={59.6,66.0}]:3.7987)[&95%={63.4,69.9}]:1.2111,((Opisthocomus_hoazin_Hoatzin:65.9286,(Charadrius_vociferus_Killdeer:64.5754,Balearica_regulorum_Grey_Crowned_Crane:64.5754)[&95%={61.3,67.6}]:1.3532)[&95%={62.6,69.0}]:0.806,(((Phaethon_lepturus_White_tailed_Tropicbird:60.021,Eurypyga_helias_Sunbittern:60.021)[&95%={56.6,63.0}]:4.5043,(Gavia_stellata_Red_throated_Loon:62.8008,((Fulmarus_glacialis_Northern_Fulmar:59.9864,(Pygoscelis_adeliae_Adelie_Penguin:22.9983,Aptenodytes_forsteri_Emperor_Penguin:22.9983)[&95%={6.9,42.8}]:36.988)[&95%={56.8,62.7}]:1.3657,(Phalacrocorax_carbo_Cormorant:58.9221,(Nipponia_nippon_Crested_Ibis:57.5582,(Egretta_garzetta_Little_Egret:55.2426,Pelecanus_crispus_Dalmatian_Pelican:55.2426)[&95%={51.6,58.4}]:2.3156)[&95%={54.3,60.4}]:1.3639)[&95%={55.7,61.7}]:2.4299)[&95%={58.2,64.1}]:1.4487)[&95%={59.6,65.6}]:1.7245)[&95%={61.3,67.5}]:0.9182,((Cariama_cristata_Red_legged_Seriema:62.1029,(Falco_peregrinus_Peregrine_Falcon:59.9929,((Melopsittacus_undulatus_Budgerigar:28.8663,Nestor_notabilis_Kea:28.8663)[&95%={14.0,40.0}]:25.5893,(Acanthisitta_chloris_Rifleman:38.4779,(Manacus_vitellinus_Golden_collared_Manakin:31.817,(Corvus_brachyrhynchos_American_Crow:20.526,(Geospiza_fortis_Medium_Ground_finch:9.9154,Taeniopygia_guttata_Zebra_Finch:9.9154)[&95%={6.2,14.2}]:10.6105)[&95%={16.2,25.5}]:11.291)[&95%={27.2,36.6}]:6.6609)[&95%={33.4,43.5}]:15.9777)[&95%={51.0,57.5}]:5.5373)[&95%={56.8,62.9}]:2.11)[&95%={58.9,65.0}]:1.3723,((Cathartes_aura_Turkey_Vulture:60.3491,(Haliaeetus_albicilla_White_tailed_Eagle:5.9922,Haliaeetus_leucocephalus_Bald_Eagle:5.9922)[&95%={2.1,13.7}]:54.3569)[&95%={57.1,63.3}]:2.4229,(Tyto_alba_Barn_Owl:61.6492,(Colius_striatus_Speckled_Mousebird:59.9419,(Leptosomus_discolor_Cuckoo_Roller:58.5719,(Apaloderma_vittatum_Bar_tailed_Trogon:55.0956,(Buceros_rhinoceros_Rhinoceros_Hornbill:51.9849,(Picoides_pubescens_Downy_Woodpecker:42.3418,Merops_nubicus_Carmine_Bee_eater:42.3418)[&95%={34.1,48.0}]:9.6431)[&95%={48.7,54.9}]:3.1107)[&95%={52.0,57.9}]:3.4763)[&95%={55.5,61.4}]:1.37)[&95%={56.8,62.7}]:1.7073)[&95%={58.5,64.5}]:1.1228)[&95%={59.6,65.6}]:0.7031)[&95%={60.3,66.4}]:1.9684)[&95%={62.2,68.4}]:1.2911)[&95%={63.4,69.8}]:1.2148)[&95%={64.6,71.1}]:1.244)[&95%={65.8,72.4}]:19.3779)[&95%={83.6,94.0}]:13.0671)[&95%={97.6,107.8}];"

x <- read.tree(text=text.string)

tips_to_keep <- c("Apaloderma_vittatum_Bar_tailed_Trogon", "Buceros_rhinoceros_Rhinoceros_Hornbill", "Picoides_pubescens_Downy_Woodpecker", "Merops_nubicus_Carmine_Bee_eater")

x2 <- keep.tip(x, tips_to_keep)

x2 <- unroot(x2)

write.tree(x2, file="unrooted_pruned_tree.tre")
